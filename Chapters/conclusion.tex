\chapter{Summary and Conclusions}\label{chapter:conc}
\section{Summary}
Inferring user intent is an important step in achieving fluent HRI for robotic exoskeletons. Doing so predictively and intuitively will enable the robot to assist the user in realizing their desired changes while allowing for easy operation of the device. The objective of this dissertation was to develop frameworks to enable such user intent estimation for people with iSCIs using solely the sensors onboard the exoskeleton. In this dissertation, the exoskeleton user's desired gait speed was assumed to represent their intent, as intent is abstract and thus, difficult to quantify. The first of the two estimation frameworks presented in this dissertation employs a library containing gaits, generated using the Bipedal Spring Loaded Inverted Pendulum model, that qualitatively emulates human walking. This library is then used to estimate the gait speed and phase of an exoskeleton user via a bank of Extended Kalman Filters running in parallel. The second framework exploits changes in gait patterns of exoskeleton users to infer the corresponding changes in their desired speed. As inter-subject gait variability and the severity of the subjects' injuries present challenges in estimating the user's desire to change speed, a data-driven strategy was presented to customize intent change estimation to fit each subject's individualized gait patterns.

%Estimation of gait speed can be performed using models of human locomotion along with models that correlate changes in gait features and speed. As such, this work draws on concepts from a variety of fields to use these models in appropriate estimation frameworks. %The fundamentals of these concepts are described in Chapter~\ref{chapter:bg_info}. This chapter describes the B-SLIP model of human locomotion, its hybrid dynamics, guard conditions, and reset maps. Poincar\'e surfaces and maps and their application to the B-SLIP model to analyze gait periodicity is also explained. Furthermore, as state estimation is a fundamental component of the objective of this dissertation, an explanation of discrete and extended Kalman Filters is also provided.

Accurate state estimation is necessary for fluent HRI, and it can be performed using physics-based models. Human gait patterns can often be accurately described by reduced-order models such as the B-SLIP model. Chapter~\ref{chapter:IMM} described a study of gait patterns observed during slow walking. A linearization-based gait search method was developed to handle the difficulty in optimizing low-speed gaits of the B-SLIP model, which was then used to generate a library of gaits that qualitatively matched human gaits. This library was used in an estimation framework capable of handling the hybrid dynamics of the B-SLIP model. This framework compared sensor measurements from the exoskeleton with library gaits using a bank of parallel EKFs to estimate the most likely gait speed and gait phase. This framework was tested on data from walking trials of an exoskeleton user. It was found that the the accuracy of the estimator depended on how well the library gaits matched human gaits. Therefore, while model-based estimation methods have the potential to easily generalize across individuals, models must be able to accurately emulate human gaits. The insights gained from this work allowed anticipative estimation of changes in a user's intended gait speed.

Foot placement while walking is highly informative of an individual's intended speed, as step length varies with gait speed. A two-stage data-driven method to predict a user's desire to speed up or slow down in the future was described in Chapter~\ref{chapter:BKF}. This method leveraged the relationship between a user's gait speed and their interactions with the robot and the environment. Using this relationship, a prediction of user's desire to speed up or slow down was made at touchdown before the user realized that change at the next midstance. The anticipative nature of this method was in contrast to the reactive nature of many state-of-the-art user intent detection methods, including the framework presented in Chapter~\ref{chapter:IMM}. The estimator was configured to only rely on step length for the trials with the uninjured user, and RMS currents of the hip motors were included for the trials with the injured user. The probability of successful intent change inference for the aggregated trials of the uninjured subject was 69\% and that for the user with iSCI was 78\%. The models used in the estimator were trained on all available trial data for the respective user, using up to 78 steps of user-specific data.

The initial formulation of the BKF relied on simple, linear models to establish a relationship between gait speed and gait features such as step length and motor currents. Further analysis, comparing the increase in model complexity versus the number of considered gait features, was performed to increase estimator accuracy. It was found that increasing the number of gait features considered in the estimator resulted in a greater increase in accuracy than increasing model complexity. User trials showed that the physical HRI is user-dependent. This user-dependence was further emphasized upon increasing the number of considered gait features and motivated the personalization of the estimation framework. However, being data-driven, the scarcity of user-specific training data was a challenge in this approach. 

Data scarcity can be addressed by exploiting commonalities in gait patterns that exist across users. Common patterns relating changes in gait speed to changes in gait features, e.g., changes in step length, are observed across exoskeleton users. Easily accessible walking data from healthy exoskeleton users can be transformed and pooled with a small amount of novel, user-specific data to increase the available amount of training data while maintaining the user-specificity of the estimator. This pooling can be done with multiple different combinations of trial data, and it is difficult to choose the appropriate combination manually. An approach that compared the mutual information between the gait speed and gait feature measurements to choose a combination of novel and base data was described in Chapter~\ref{chapter:MP}. This extended dataset was then used to create models correlating gait features to gait speed to be used in the estimation framework from Chapter~\ref{chapter:BKF}. Data scarcity was addressed as the pooling process only used 8-12 steps' worth of novel user-specific data, resulting in a reduction of over 70 steps compared to Chapter~\ref{chapter:BKF}. The average successful estimation of speed-up and slow-down changes increased from 52\% to 67\% with personalization, with a best-case improvement of 32\%, from 48\% to 80\%. 

\section{Future work}

The contributions made in this dissertation have resulted in a variety of directions for future research to advance user intent estimation for lower-limb exoskeletons. A number of potential improvements and extensions are offered below.

\subsection{Refined models for use in the IMM framework}
The work presented in Chapter~\ref{chapter:IMM} shows that the IMM-based framework is dependent on the \com~ trajectories of the library gaits matching those observed in human trials. There are discrepancies between these trajectories that can be reduced through further refinement of the template model. %The potential need for modifications to the template is motivated by the additional accuracy required of them in state estimation as compared to previously.
The B-SLIP model was historically motivated by the fact that it qualitatively displays the characteristic M-shaped ground reaction force profile of human walking. The use of such models for accurate state estimation requires quantitative accuracy beyond these previous qualitative considerations. 

Differences in the MI between gait speed and gait features were observed in Chapter~\ref{chapter:MP} due to the effects of assistive devices (walkers or crutches) that were required for use with the exoskeleton. Therefore, one key modification to potentially improve the estimation accuracy would be to address the effects from the assistive device, and incorporate them into the model and the resulting gait library. Another modification to the model would be to use a model that considers torso dynamics. A candidate model may be the B-SLIP with a Virtual Pivot Point (VPP)~\cite{maus2010upright}. However, further research to ascertain the applicability of the VPP to the gaits of exoskeleton users is necessary. 

\subsection{Extending the framework to handle other intended actions}

The estimators presented in this dissertation only consider the changes in the user's forward gait speed. However, there are many other actions the user may wish to perform such as gait initiation or termination, turning, i.e., yaw movement, or transitions to/from sitting. In case of the turning motion, for example, the user's desired turn rate and final bearing also need to be estimated. Additional analysis of the available data is required to generate the necessary models to extend the estimation framework and estimate these actions. The lack of hip abduction/adduction in the exoskeleton presents a potential challenge in gathering data for turning actions. Furthermore, the amount of available data related to gait initiation/termination and turning is limited in comparison to forward speed data. This shortage of data motivates the need to conduct further human trials.

\subsection{Extending the dynamics used in the second stage of the BKF}

The second stage of the BKF uses simple dynamics that switch the signs of the lateral position and velocity of the CoM to emulate the switching of the stance foot from step to step. The simplicity of these dynamics was motivated by the assumption that the motion of the CoM is periodic with respect to the stance foot. Extending these dynamics enabling them to describe non-periodic motion is necessary for the estimator to apply to actions such as turning and gait initiation/termination. Furthermore, the CoM state may also be extended to include the exoskeleton user's bearing.

\subsection{Testing on an increased number of subjects}

The data used to validate the estimators in this dissertation consisted of trials of three uninjured users and two users with iSCI. All of these users were highly experienced exoskeleton users. Their proficiency in the use of the exoskeleton may affect the fluency of their pHRI and subsequently, the performance of the estimator. It may be beneficial to increase the number of subjects to assess the robustness of the estimator and the data augmentation method to inter-subject variability. Additionally, the estimator may also be tested on data from novice users to explore any challenges that may arise from less fluent pHRI as compared to experienced users.

\subsection{Guarantees about the quality of the pooled data and the selection of appropriate base data}

In Chapter~\ref{chapter:MP}, it was observed that appropriate novel data must be used in training the conditional models for the estimator due to gait variability present across trials. This selection served to capture gait patterns accurately, while avoiding forming misleading relationships resulting from noisy trials. However, it is difficult to guarantee that the chosen novel data will result in the best possible estimator performance. Refinements to the data pooling framework towards achieving such a guarantee may be made in the future.

It was also found that walker base data led to uniformly better estimator performance over the use of crutch base data, even when the novel data were for user trials with crutches. This result shows that the selection of appropriate base data needs to be considered to ensure optimal estimator performance. The new data selection algorithm suggests future work to address other configuration options of the data pooling and training process. However, leaving the choice of both base and novel datasets free for selection results in a combinatorial challenge. New methods to address this scaling challenge would be needed. Selecting subsets of the gait features could also be assessed to further improve estimator performance.

\subsection{Exoskeleton control based on intent estimation}

This dissertation describes frameworks to estimate the user's intended gait velocity. However, it is necessary perform tests using control based on the output of these frameworks. The inclusion of user intent estimation in exoskeleton control may further affect pHRI, and studying these effects will help improve the quality of the estimates output by the frameworks and help increase their robustness to gait variability.

\section{Conclusion}
%
%In summary, this dissertation has developed a data-driven framework to intuitively and predictively estimate an exoskeleton user's desire to change their walking speed. The key benefit of this framework is that the estimate of the sign of the desired speed change is made at touchdown, which will allow the exoskeleton to assist the user in realizing their desired change through the remainder of the step. It is difficult to acquire a sufficiently large quantity of user-specific training data from people with iSCIs to generate the models used in the estimator. To address this challenge, this dissertation has also developed a method to address the scarcity of training data required for use in the estimation estimation framework by pooling user-independent base data with user-specific novel data. This method results in a larger training dataset while customizing the estimator to deal with each subject's individualized walking patterns. This expanded dataset also resulted in improvements to the accuracy of the estimator.

As exoskeleton technology advances, fluent HRI is important considering the dependence of a person with SCI on the exoskeleton for locomotion. Estimating user intent via intuitive pHRI can contribute toward increasing this fluency. As a result, users may locomote more naturally and reduce the cognitive load associated with using an assistive device, resulting in a more comfortable user experience. While many intent estimation strategies have been designed for prostheses users, limited work exists for exoskeleton users. The contributions of this dissertation are intended to advance this field and address the limitation.

This work uses forward gait speed to represent a user's intent, as intent is difficult to quantify. In the future, this estimation framework may be expanded to handle the estimation of the user's desire to perform other actions such as to initiate/terminate the gait, turn, or estimate the user's desired bearing. These developments combined, will allow easier use of the exoskeleton, leading to improved patient outcomes and quality of life.